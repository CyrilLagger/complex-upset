<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Examples - Python • ComplexUpset</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Examples - Python">
<meta property="og:description" content="ComplexUpset">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@krassowski">
<meta name="twitter:site" content="@krassowski">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ComplexUpset</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Examples_Python.html">Examples - Python</a>
    </li>
    <li>
      <a href="../articles/Examples_R.html">Examples - R</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/krassowski/complex-upset/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Examples - Python</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/krassowski/complex-upset/blob/master/vignettes/Examples_Python.Rmd"><code>vignettes/Examples_Python.Rmd</code></a></small>
      <div class="hidden name"><code>Examples_Python.Rmd</code></div>

    </div>

    
    
<div id="python-integration-for-use-in-jupyter-notebooks" class="section level3">
<h3 class="hasAnchor">
<a href="#python-integration-for-use-in-jupyter-notebooks" class="anchor"></a>Python integration (for use in Jupyter Notebooks)</h3>
<p>Please install the requirements using:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="ex">pip</span> install pandas pydataset rpy2</a></code></pre></div>
<p>Load <code>rpy2</code> extension:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb2-1" title="1"><span class="op">%%</span>capture</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="op">%</span>load_ext rpy2.ipython</a></code></pre></div>
<p>Install the package (if not aleady installed):</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r">%%R
if (!require(devtools, quietly=T)) install.packages("devtools")
if (!require(ComplexUpset, quietly=T)) devtools::install_github("krassowski/complex-upset")</pre></body></html></div>
</div>
<div id="load-ggplot2-and-complexupset" class="section level2">
<h2 class="hasAnchor">
<a href="#load-ggplot2-and-complexupset" class="anchor"></a>Load ggplot2 and ComplexUpset</h2>
<div class="sourceCode" id="cb4"><html><body><pre class="r">%%R
library(ggplot2)
library(ComplexUpset)</pre></body></html></div>
</div>
<div id="prepare-the-datasets" class="section level2">
<h2 class="hasAnchor">
<a href="#prepare-the-datasets" class="anchor"></a>Prepare the datasets</h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb5-1" title="1"><span class="im">from</span> pydataset <span class="im">import</span> data <span class="im">as</span> load_data</a>
<a class="sourceLine" id="cb5-2" title="2">movies <span class="op">=</span> load_data(<span class="st">'movies'</span>).dropna()</a>
<a class="sourceLine" id="cb5-3" title="3">movies.head(<span class="dv">3</span>).T</a></code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table class="table dataframe">
<thead><tr style="text-align: right;">
<th>
</th>
<th>
48
</th>
<th>
112
</th>
<th>
124
</th>
</tr></thead>
<tbody>
<tr>
<th>
title
</th>
<td>
’Til There Was You
</td>
<td>
10 Things I Hate About You
</td>
<td>
100 Mile Rule
</td>
</tr>
<tr>
<th>
year
</th>
<td>
1997
</td>
<td>
1999
</td>
<td>
2002
</td>
</tr>
<tr>
<th>
length
</th>
<td>
113
</td>
<td>
97
</td>
<td>
98
</td>
</tr>
<tr>
<th>
budget
</th>
<td>
2.3e+07
</td>
<td>
1.6e+07
</td>
<td>
1.1e+06
</td>
</tr>
<tr>
<th>
rating
</th>
<td>
4.8
</td>
<td>
6.7
</td>
<td>
5.6
</td>
</tr>
<tr>
<th>
votes
</th>
<td>
799
</td>
<td>
19095
</td>
<td>
181
</td>
</tr>
<tr>
<th>
r1
</th>
<td>
4.5
</td>
<td>
4.5
</td>
<td>
4.5
</td>
</tr>
<tr>
<th>
r2
</th>
<td>
4.5
</td>
<td>
4.5
</td>
<td>
4.5
</td>
</tr>
<tr>
<th>
r3
</th>
<td>
4.5
</td>
<td>
4.5
</td>
<td>
4.5
</td>
</tr>
<tr>
<th>
r4
</th>
<td>
14.5
</td>
<td>
4.5
</td>
<td>
4.5
</td>
</tr>
<tr>
<th>
r5
</th>
<td>
14.5
</td>
<td>
4.5
</td>
<td>
14.5
</td>
</tr>
<tr>
<th>
r6
</th>
<td>
14.5
</td>
<td>
14.5
</td>
<td>
24.5
</td>
</tr>
<tr>
<th>
r7
</th>
<td>
14.5
</td>
<td>
24.5
</td>
<td>
14.5
</td>
</tr>
<tr>
<th>
r8
</th>
<td>
4.5
</td>
<td>
14.5
</td>
<td>
14.5
</td>
</tr>
<tr>
<th>
r9
</th>
<td>
4.5
</td>
<td>
14.5
</td>
<td>
4.5
</td>
</tr>
<tr>
<th>
r10
</th>
<td>
14.5
</td>
<td>
14.5
</td>
<td>
14.5
</td>
</tr>
<tr>
<th>
mpaa
</th>
<td>
PG-13
</td>
<td>
PG-13
</td>
<td>
R
</td>
</tr>
<tr>
<th>
Action
</th>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
</tr>
<tr>
<th>
Animation
</th>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
</tr>
<tr>
<th>
Comedy
</th>
<td>
1
</td>
<td>
1
</td>
<td>
1
</td>
</tr>
<tr>
<th>
Drama
</th>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
</tr>
<tr>
<th>
Documentary
</th>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
</tr>
<tr>
<th>
Romance
</th>
<td>
1
</td>
<td>
1
</td>
<td>
0
</td>
</tr>
<tr>
<th>
Short
</th>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb6-1" title="1">genres <span class="op">=</span> <span class="bu">list</span>(movies.columns[<span class="op">-</span><span class="dv">7</span>:])</a>
<a class="sourceLine" id="cb6-2" title="2">genres</a></code></pre></div>
<p>[‘Action’, ‘Animation’, ‘Comedy’, ‘Drama’, ‘Documentary’, ‘Romance’, ‘Short’]</p>
<p>Convert the genre indicator columns to use boolean values:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb7-1" title="1">movies[genres] <span class="op">=</span> movies[genres] <span class="op">==</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb7-2" title="2">movies[genres].head(<span class="dv">3</span>).T</a></code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table class="table dataframe">
<thead><tr style="text-align: right;">
<th>
</th>
<th>
48
</th>
<th>
112
</th>
<th>
124
</th>
</tr></thead>
<tbody>
<tr>
<th>
Action
</th>
<td>
False
</td>
<td>
False
</td>
<td>
False
</td>
</tr>
<tr>
<th>
Animation
</th>
<td>
False
</td>
<td>
False
</td>
<td>
False
</td>
</tr>
<tr>
<th>
Comedy
</th>
<td>
True
</td>
<td>
True
</td>
<td>
True
</td>
</tr>
<tr>
<th>
Drama
</th>
<td>
False
</td>
<td>
False
</td>
<td>
False
</td>
</tr>
<tr>
<th>
Documentary
</th>
<td>
False
</td>
<td>
False
</td>
<td>
False
</td>
</tr>
<tr>
<th>
Romance
</th>
<td>
True
</td>
<td>
True
</td>
<td>
False
</td>
</tr>
<tr>
<th>
Short
</th>
<td>
False
</td>
<td>
False
</td>
<td>
False
</td>
</tr>
</tbody>
</table>
</div>
<div id="quick-notes-on-rpy2-r-magic-usage" class="section level3">
<h3 class="hasAnchor">
<a href="#quick-notes-on-rpy2-r-magic-usage" class="anchor"></a>Quick notes on <code>rpy2</code> <code>%%R</code> magic usage</h3>
<ul>
<li>use <code>-i</code> switch to import data into R using rpy2 interface</li>
<li>
<code>-w</code> and <code>-h</code> can be used to adjust the width and height of the plot</li>
<li>
<code>-r</code> switch can be used to adjust DPI</li>
</ul>
</div>
<div id="import-the-python-data-frame-to-r" class="section level3">
<h3 class="hasAnchor">
<a href="#import-the-python-data-frame-to-r" class="anchor"></a>Import the Python data frame to R</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb8-1" title="1"><span class="op">%</span>R <span class="op">-</span>i movies <span class="op">-</span>i genres</a></code></pre></div>
</div>
</div>
<div id="basic-usage" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-usage" class="anchor"></a>0. Basic usage</h2>
<p>There are two required arguments: - the first argument is expected to be a dataframe with both group indicator variables and covariates, - the second argument specifies a list with names of column which indicate the group membership.</p>
<p>Additional arguments can be provided, such as <code>name</code> (specifies xlab for intersection matrix) or <code>width_ratio</code> (specifies how much space should be occupied by the set size panel). Other such arguments are discussed at length later in this document.</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r">%%R -w 800 -h 300
upset(movies, genres, name='genre', width_ratio=0.1)</pre></body></html></div>
<p><img src="Examples_Python_files/Examples_Python_19_0.png"></p>
<div id="selecting-intersections-by-size" class="section level3">
<h3 class="hasAnchor">
<a href="#selecting-intersections-by-size" class="anchor"></a>0.1 Selecting intersections by size</h3>
<p>We will focus on the intersections with at least ten members <code>(min_size=10)</code> and on a few variables which are significantly different between the intersections (see 2. Running statistical tests).</p>
<p>When using <code>min_size</code>, the empty groups will be skipped by default (e.g. <em>Short</em> movies would have no overlap with size of 10). To keep all groups pass <code>keep_empty_groups=TRUE</code>:</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r">%%R -w 800 -h 300
(
    upset(movies, genres, name='genre', width_ratio=0.1, min_size=10, wrap=TRUE, set_sizes=FALSE)
    + ggtitle('Without empty groups (Short dropped)')
    +    # adding plots is possible thanks to patchwork
    upset(movies, genres, name='genre', width_ratio=0.1, min_size=10, keep_empty_groups=TRUE, wrap=TRUE, set_sizes=FALSE)
    + ggtitle('With empty groups')
)</pre></body></html></div>
<p>[1] “Dropping empty groups: Short”</p>
<p><img src="Examples_Python_files/Examples_Python_22_1.png"></p>
<p>When empty columns are detected a warning will be issued. The silence it, pass <code>warn_when_dropping_groups=FALSE</code>.</p>
</div>
</div>
<div id="adding-components" class="section level2">
<h2 class="hasAnchor">
<a href="#adding-components" class="anchor"></a>1. Adding components</h2>
<p>We can add multiple annotation components (also called panels):</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r">%%R -w 800 -h 800

set.seed(0)   # keep the same jitter for identical plots

upset(
    movies,
    genres,
    annotations = list(
        'Length'=list(
            aes=aes(x=intersection, y=length),
            geom=geom_boxplot()
        ),
        'Rating'=list(
            aes=aes(x=intersection, y=rating),
            geom=list(
                # checkout ggbeeswarm::geom_quasirandom for better results!
                geom_jitter(aes(color=log10(votes))),
                geom_violin(width=1.1, alpha=0.5)
            )
        ),
        'Budget'=list(
            aes=aes(x=intersection, y=budget),
            geom=geom_boxplot()
        )
    ),
    min_size=10,
    width_ratio=0.1
)</pre></body></html></div>
<p>[1] “Dropping empty groups: Short”</p>
<p><img src="Examples_Python_files/Examples_Python_26_1.png"></p>
<p>For simple annotations, such as the length above, you can use a shorthand notation of <code>upset_annotate</code>:</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r">%%R -w 800 -h 600

upset(
    movies,
    genres,
    annotations = list(
        'Length'=upset_annotate('length', geom_boxplot()),
        'Budget'=upset_annotate('budget', geom_boxplot())
    ),
    min_size=10,
    width_ratio=0.1
)</pre></body></html></div>
<p>[1] “Dropping empty groups: Short”</p>
<p><img src="Examples_Python_files/Examples_Python_28_1.png"></p>
<p>You can also barplots to demonstrate difference in proportions of categorical variables:</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r">%%R -w 800 -h 500

upset(
    movies,
    genres,
    annotations = list(
        'MPAA Raiting'=list(
            aes=aes(x=intersection, fill=mpaa),
            geom=list(
                geom_bar(stat='count', position='fill'),
                scale_y_continuous(labels=scales::percent_format()),
                scale_fill_manual(values=c(
                    'R'='#E41A1C', 'PG'='#377EB8',
                    'PG-13'='#4DAF4A', 'NC-17'='#FF7F00'
                ))
            )
        )
    ),
    width_ratio=0.1
)</pre></body></html></div>
<p><img src="Examples_Python_files/Examples_Python_30_0.png"></p>
</div>
<div id="running-statistical-tests" class="section level2">
<h2 class="hasAnchor">
<a href="#running-statistical-tests" class="anchor"></a>2. Running statistical tests</h2>
<div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb14-1" title="1"><span class="op">%</span>R upset_test(movies, genres)</a></code></pre></div>
<p>[1] “year, length, budget, rating, votes, r1, r2, r3, r4, r5, r6, r7, r8, r9, r10, mpaa differ significantly between intersections”</p>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table class="table dataframe">
<thead><tr style="text-align: right;">
<th>
</th>
<th>
variable
</th>
<th>
p.value
</th>
<th>
statistic
</th>
<th>
test
</th>
<th>
fdr
</th>
</tr></thead>
<tbody>
<tr>
<th>
length
</th>
<td>
length
</td>
<td>
6.511525e-71
</td>
<td>
422.884445
</td>
<td>
Kruskal-Wallis rank sum test
</td>
<td>
1.106959e-69
</td>
</tr>
<tr>
<th>
rating
</th>
<td>
rating
</td>
<td>
1.209027e-46
</td>
<td>
301.727638
</td>
<td>
Kruskal-Wallis rank sum test
</td>
<td>
1.027673e-45
</td>
</tr>
<tr>
<th>
budget
</th>
<td>
budget
</td>
<td>
3.899860e-44
</td>
<td>
288.974760
</td>
<td>
Kruskal-Wallis rank sum test
</td>
<td>
2.209921e-43
</td>
</tr>
<tr>
<th>
r8
</th>
<td>
r8
</td>
<td>
9.900004e-39
</td>
<td>
261.288151
</td>
<td>
Kruskal-Wallis rank sum test
</td>
<td>
4.207502e-38
</td>
</tr>
<tr>
<th>
mpaa
</th>
<td>
mpaa
</td>
<td>
3.732200e-35
</td>
<td>
242.779393
</td>
<td>
Kruskal-Wallis rank sum test
</td>
<td>
1.268948e-34
</td>
</tr>
<tr>
<th>
r9
</th>
<td>
r9
</td>
<td>
1.433256e-30
</td>
<td>
218.781602
</td>
<td>
Kruskal-Wallis rank sum test
</td>
<td>
4.060891e-30
</td>
</tr>
<tr>
<th>
r1
</th>
<td>
r1
</td>
<td>
2.211600e-23
</td>
<td>
180.327398
</td>
<td>
Kruskal-Wallis rank sum test
</td>
<td>
5.371029e-23
</td>
</tr>
<tr>
<th>
r4
</th>
<td>
r4
</td>
<td>
1.008119e-18
</td>
<td>
154.627715
</td>
<td>
Kruskal-Wallis rank sum test
</td>
<td>
2.142254e-18
</td>
</tr>
<tr>
<th>
r3
</th>
<td>
r3
</td>
<td>
2.568227e-17
</td>
<td>
146.702174
</td>
<td>
Kruskal-Wallis rank sum test
</td>
<td>
4.851095e-17
</td>
</tr>
<tr>
<th>
r5
</th>
<td>
r5
</td>
<td>
9.823827e-16
</td>
<td>
137.663096
</td>
<td>
Kruskal-Wallis rank sum test
</td>
<td>
1.670051e-15
</td>
</tr>
<tr>
<th>
r7
</th>
<td>
r7
</td>
<td>
9.201549e-14
</td>
<td>
126.192430
</td>
<td>
Kruskal-Wallis rank sum test
</td>
<td>
1.422058e-13
</td>
</tr>
<tr>
<th>
r2
</th>
<td>
r2
</td>
<td>
2.159955e-13
</td>
<td>
124.006043
</td>
<td>
Kruskal-Wallis rank sum test
</td>
<td>
3.059936e-13
</td>
</tr>
<tr>
<th>
r10
</th>
<td>
r10
</td>
<td>
1.283470e-11
</td>
<td>
113.381126
</td>
<td>
Kruskal-Wallis rank sum test
</td>
<td>
1.678384e-11
</td>
</tr>
<tr>
<th>
votes
</th>
<td>
votes
</td>
<td>
2.209085e-10
</td>
<td>
105.795879
</td>
<td>
Kruskal-Wallis rank sum test
</td>
<td>
2.682460e-10
</td>
</tr>
<tr>
<th>
r6
</th>
<td>
r6
</td>
<td>
3.779129e-05
</td>
<td>
70.809705
</td>
<td>
Kruskal-Wallis rank sum test
</td>
<td>
4.283013e-05
</td>
</tr>
<tr>
<th>
year
</th>
<td>
year
</td>
<td>
2.745818e-02
</td>
<td>
46.559723
</td>
<td>
Kruskal-Wallis rank sum test
</td>
<td>
2.917431e-02
</td>
</tr>
<tr>
<th>
title
</th>
<td>
title
</td>
<td>
2.600003e-01
</td>
<td>
34.533745
</td>
<td>
Kruskal-Wallis rank sum test
</td>
<td>
2.600003e-01
</td>
</tr>
</tbody>
</table>
</div>
<p><code>Kruskal-Wallis rank sum test</code> is not always the best choice.</p>
<p>You can either change the test for:</p>
<ul>
<li>all the variables (<code>test=your.test</code>), or</li>
<li>specific variables (using <code>tests=list(variable=some.test)</code> argument)</li>
</ul>
<p>The tests are called with <code>(formula=variable ~ intersection, data)</code> signature, such as accepted by <code>kruskal.test</code>. The result is expected to be a list with following members:</p>
<ul>
<li><code>p.value</code></li>
<li><code>statistic</code></li>
<li><code>method</code></li>
</ul>
<p>It is easy to adapt tests which do not obey this signature/output convention; for example the Chi-squared test and anova can be wrapped with two-line functions as follows:</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r">%%R
chisq_from_formula = function(formula, data) {
    chisq.test(
        ftable(formula, data)
    )
}

anova_single = function(formula, data) {
    result = summary(aov(formula, data))
    list(
        p.value=result[[1]][['Pr(&gt;F)']][[1]],
        method='Analysis of variance Pr(&gt;F)',
        statistic=result[[1]][['F value']][[1]]
    )
}

custom_tests = list(
    mpaa=chisq_from_formula,
    budget=anova_single
)</pre></body></html></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb16-1" title="1"><span class="op">%</span>R head(upset_test(movies, genres, tests<span class="op">=</span>custom_tests))</a></code></pre></div>
<p>[1] “year, length, budget, rating, votes, r1, r2, r3, r4, r5, r6, r7, r8, r9, r10, mpaa differ significantly between intersections”</p>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table class="table dataframe">
<thead><tr style="text-align: right;">
<th>
</th>
<th>
variable
</th>
<th>
p.value
</th>
<th>
statistic
</th>
<th>
test
</th>
<th>
fdr
</th>
</tr></thead>
<tbody>
<tr>
<th>
length
</th>
<td>
length
</td>
<td>
6.511525e-71
</td>
<td>
422.884445
</td>
<td>
Kruskal-Wallis rank sum test
</td>
<td>
1.106959e-69
</td>
</tr>
<tr>
<th>
budget
</th>
<td>
budget
</td>
<td>
1.348209e-60
</td>
<td>
13.663948
</td>
<td>
Analysis of variance Pr(&gt;F)
</td>
<td>
1.145977e-59
</td>
</tr>
<tr>
<th>
rating
</th>
<td>
rating
</td>
<td>
1.209027e-46
</td>
<td>
301.727638
</td>
<td>
Kruskal-Wallis rank sum test
</td>
<td>
6.851151e-46
</td>
</tr>
<tr>
<th>
mpaa
</th>
<td>
mpaa
</td>
<td>
9.799097e-42
</td>
<td>
406.338139
</td>
<td>
Pearson’s Chi-squared test
</td>
<td>
4.164616e-41
</td>
</tr>
<tr>
<th>
r8
</th>
<td>
r8
</td>
<td>
9.900004e-39
</td>
<td>
261.288151
</td>
<td>
Kruskal-Wallis rank sum test
</td>
<td>
3.366002e-38
</td>
</tr>
<tr>
<th>
r9
</th>
<td>
r9
</td>
<td>
1.433256e-30
</td>
<td>
218.781602
</td>
<td>
Kruskal-Wallis rank sum test
</td>
<td>
4.060891e-30
</td>
</tr>
</tbody>
</table>
</div>
<p>Many tests will require at least two observations in each group. You can skip intersections with less than two members with <code>min_size=2</code>.</p>
<div class="sourceCode" id="cb17"><html><body><pre class="r">%%R
bartlett_results = suppressWarnings(
    upset_test(movies, genres, test=bartlett.test, min_size=2)
)
tail(bartlett_results)</pre></body></html></div>
<p>[1] “NA, year, length, budget, rating, votes, r1, r2, r3, r4, r5, r6, r7, r8, r9, r10, NA differ significantly between intersections” variable p.value statistic year year 1.041955e-67 386.53699 length length 3.982729e-67 383.70148 budget budget 7.637563e-50 298.89911 rating rating 3.980194e-06 66.63277 title title NA NA mpaa mpaa NA NA test fdr year Bartlett test of homogeneity of variances 1.302444e-67 length Bartlett test of homogeneity of variances 4.595457e-67 budget Bartlett test of homogeneity of variances 8.183103e-50 rating Bartlett test of homogeneity of variances 3.980194e-06 title Bartlett test of homogeneity of variances NA mpaa Bartlett test of homogeneity of variances NA</p>
<div id="ignore-specific-variables" class="section level3">
<h3 class="hasAnchor">
<a href="#ignore-specific-variables" class="anchor"></a>2.1 Ignore specific variables</h3>
<p>You may want to exclude variables which are: - highly correlated and therefore interfering with the FDR calculation, or - simply irrelevant</p>
<p>In the movies example, the title variable is not a reasonable thing to compare. We can ignore it using:</p>
<div class="sourceCode" id="cb18"><html><body><pre class="r">%%R
# note: title no longer present
rownames(upset_test(movies, genres, ignore=c('title')))</pre></body></html></div>
<p>[1] “year, length, budget, rating, votes, r1, r2, r3, r4, r5, r6, r7, r8, r9, r10, mpaa differ significantly between intersections” [1] “length” “rating” “budget” “r8” “mpaa” “r9” “r1” “r4”<br>
[9] “r3” “r5” “r7” “r2” “r10” “votes” “r6” “year”</p>
</div>
</div>
<div id="adjusting-intersection-size" class="section level2">
<h2 class="hasAnchor">
<a href="#adjusting-intersection-size" class="anchor"></a>3. Adjusting “Intersection size”</h2>
<div id="counts" class="section level3">
<h3 class="hasAnchor">
<a href="#counts" class="anchor"></a>3.1 Counts</h3>
<p>The counts over the bars can be disabled:</p>
<div class="sourceCode" id="cb19"><html><body><pre class="r">%%R -w 800 -h 300

upset(
    movies,
    genres,
    base_annotations=list(
        'Intersection size'=intersection_size(counts=FALSE)
    ),
    min_size=10,
    width_ratio=0.1
)</pre></body></html></div>
<p>[1] “Dropping empty groups: Short”</p>
<p><img src="Examples_Python_files/Examples_Python_45_1.png"></p>
<p>The colors can be changed:</p>
<div class="sourceCode" id="cb20"><html><body><pre class="r">%%R -w 800 -h 300

upset(
    movies,
    genres,
    base_annotations=list(
        'Intersection size'=intersection_size(
            text_colors=c(
                on_background='brown', on_bar='yellow'
            )
        )
    ),
    min_size=10,
    width_ratio=0.1
)</pre></body></html></div>
<p>[1] “Dropping empty groups: Short”</p>
<p><img src="Examples_Python_files/Examples_Python_47_1.png"></p>
<p>Any parameter supported by <code>geom_text</code> can be passed in <code>text</code> list:</p>
<div class="sourceCode" id="cb21"><html><body><pre class="r">%%R -w 800 -h 300

upset(
    movies,
    genres,
    base_annotations=list(
        'Intersection size'=intersection_size(
            text=list(
                vjust=-0.1,
                hjust=-0.1,
                angle=45
            )
        )
    ),
    min_size=10,
    width_ratio=0.1
)</pre></body></html></div>
<p>[1] “Dropping empty groups: Short”</p>
<p><img src="Examples_Python_files/Examples_Python_49_1.png"></p>
</div>
<div id="fill-the-bars" class="section level3">
<h3 class="hasAnchor">
<a href="#fill-the-bars" class="anchor"></a>3.2 Fill the bars</h3>
<div class="sourceCode" id="cb22"><html><body><pre class="r">%%R -w 800 -h 300

upset(
    movies,
    genres,
    base_annotations=list(
        'Intersection size'=intersection_size(
            counts=FALSE,
            aes=aes(fill=mpaa)
        )
    ),
    width_ratio=0.1
)</pre></body></html></div>
<p><img src="Examples_Python_files/Examples_Python_51_0.png"></p>
</div>
<div id="adjusting-the-height-of-the-matrixintersection-size" class="section level3">
<h3 class="hasAnchor">
<a href="#adjusting-the-height-of-the-matrixintersection-size" class="anchor"></a>3.3 Adjusting the height of the matrix/intersection size</h3>
<p>Setting <code>height_ratio=1</code> will cause the intersection matrix and the intersection size to have an equal height:</p>
<div class="sourceCode" id="cb23"><html><body><pre class="r">%%R -w 800 -h 300

upset(
    movies,
    genres,
    height_ratio=1,
    width_ratio=0.1
)</pre></body></html></div>
<p><img src="Examples_Python_files/Examples_Python_54_0.png"></p>
</div>
<div id="hiding-intersection-size" class="section level3">
<h3 class="hasAnchor">
<a href="#hiding-intersection-size" class="anchor"></a>3.5 Hiding intersection size</h3>
<p>You can always disable the intersection size altogether:</p>
<div class="sourceCode" id="cb24"><html><body><pre class="r">%%R -w 800 -h 160
upset(
    movies,
    genres,
    base_annotations=list(),
    min_size=10,
    width_ratio=0.1
)</pre></body></html></div>
<p>[1] “Dropping empty groups: Short”</p>
<p><img src="Examples_Python_files/Examples_Python_57_1.png"></p>
</div>
<div id="showing-intersection-sizeunion-size-ratio" class="section level3">
<h3 class="hasAnchor">
<a href="#showing-intersection-sizeunion-size-ratio" class="anchor"></a>3.6 Showing intersection size/union size ratio</h3>
<p>While this cannot be computed for the null intersection (observations which do not belong to either of the groups), it is usefull to visualise which intersections might be large due to the chance (i.e. corrsponding groups being proportionally larger) alone:</p>
<div class="sourceCode" id="cb25"><html><body><pre class="r">%%R -w 800 -h 600
upset(
    movies, genres, name='genre', width_ratio=0.1, min_size=10,
    base_annotations=list(
        'Intersection size'=intersection_size(),
        'Intersection ratio'=intersection_ratio()
    )
)</pre></body></html></div>
<p>[1] “Dropping empty groups: Short”</p>
<p><img src="Examples_Python_files/Examples_Python_60_1.png"></p>
<p>The plot above tells us that the analysed documentary movies are always documentaries (and nothing more!), while comedies more often include elements of other genres (e.g. drama, romance) rather than being comedies alone (like stand-up shows).</p>
</div>
<div id="showing-percentages" class="section level3">
<h3 class="hasAnchor">
<a href="#showing-percentages" class="anchor"></a>3.7 Showing percentages</h3>
<p><code>text_aes</code> can be used to manipulate the aesthetics of the labels. Using the <code>intersection_size</code> and <code>union_size</code> one can calculate percentage of items in the intersection (relative to the potential size of the intersection). A <code><a href="../reference/upset_text_percentage.html">upset_text_percentage(digits=0, sep='')</a></code> shorthand is provided for convenience; please note that it has to be used with <code>aes_</code> rather than <code>aes</code>:</p>
<div class="sourceCode" id="cb26"><html><body><pre class="r">%%R -w 800 -h 600
upset(
    movies, genres, name='genre', width_ratio=0.1, min_size=10,
    base_annotations=list(
        # with manual aes specification:
        'Intersection size'=intersection_size(text_aes=aes(label=paste0(round(intersection_size/union_size * 100), '%'))),
        # using shorthand:
        'Intersection ratio'=intersection_ratio(text_aes=aes_(label=upset_text_percentage()))
    )
)</pre></body></html></div>
<p>[1] “Dropping empty groups: Short”</p>
<p><img src="Examples_Python_files/Examples_Python_64_1.png"></p>
</div>
</div>
<div id="adjusting-set-size" class="section level2">
<h2 class="hasAnchor">
<a href="#adjusting-set-size" class="anchor"></a>4. Adjusting “set size”</h2>
<div id="rotate-labels" class="section level3">
<h3 class="hasAnchor">
<a href="#rotate-labels" class="anchor"></a>4.1 Rotate labels</h3>
<p>To rotate the labels modify correposnding theme:</p>
<div class="sourceCode" id="cb27"><html><body><pre class="r">%%R -w 400 -h 300
upset(
    movies, genres,
    min_size=100,
    width_ratio=0.15,
    themes=upset_modify_themes(
        list(
            'overall_sizes'=theme(axis.text.x=element_text(angle=90))
        )
    )
)</pre></body></html></div>
<p>[1] “Dropping empty groups: Animation, Documentary, Short”</p>
<p><img src="Examples_Python_files/Examples_Python_68_1.png"></p>
<p>To display the ticks:</p>
<div class="sourceCode" id="cb28"><html><body><pre class="r">%%R -w 400 -h 300
upset(
    movies, genres, width_ratio=0.3, min_size=100, wrap=TRUE,
    themes=upset_modify_themes(
        list(
            'overall_sizes'=theme(axis.ticks.x=element_line())
        )
    )
)</pre></body></html></div>
<p>[1] “Dropping empty groups: Animation, Documentary, Short”</p>
<p><img src="Examples_Python_files/Examples_Python_70_1.png"></p>
</div>
<div id="modify-geoms-and-other-layers" class="section level3">
<h3 class="hasAnchor">
<a href="#modify-geoms-and-other-layers" class="anchor"></a>4.2 Modify geoms and other layers</h3>
<p>Arguments of the <code>geom_bar</code> can be passed to <code>upset_set_size</code>; it can even use a different geom, or be replaced with a custom list of layers altogether:</p>
<div class="sourceCode" id="cb29"><html><body><pre class="r">%%R -w 800 -h 300

(
    upset(
        movies, genres, width_ratio=0.5, max_size=100, min_size=15, wrap=TRUE,
        set_sizes=upset_set_size(
            width=0.4
        )
    )
    +
    upset(
        movies, genres, width_ratio=0.5, max_size=100, min_size=15, wrap=TRUE,
        set_sizes=upset_set_size(
            geom=geom_point,
            stat='count',
            color='blue'
        )
    )
    +
    upset(
        movies, genres, width_ratio=0.5, max_size=100, min_size=15, wrap=TRUE,
        set_sizes=list(
            geom_point(aes(y=..count../max(..count..)), stat='count'),
            ylab('Size relative to the largest'),
            scale_y_reverse()
        )
    )
)</pre></body></html></div>
<p>[1] “Dropping empty groups: Documentary, Short” [1] “Dropping empty groups: Documentary, Short” [1] “Dropping empty groups: Documentary, Short”</p>
<p><img src="Examples_Python_files/Examples_Python_73_1.png"></p>
</div>
<div id="logarithmic-scale" class="section level3">
<h3 class="hasAnchor">
<a href="#logarithmic-scale" class="anchor"></a>4.3 Logarithmic scale</h3>
<p>In order to use a log scale we need pass additional scale to in <code>layers</code> argument. However, as the bars are on flipped coordinates, we need a reversed log transformation:</p>
<div class="sourceCode" id="cb30"><html><body><pre class="r">%%R
reverse_log_trans </pre></body></html></div>
<p>Which is then easy to apply:</p>
<div class="sourceCode" id="cb31"><html><body><pre class="r">%%R -w 500 -h 300

upset(
    movies, genres,
    width_ratio=0.1,
    min_size=10,
    set_sizes=upset_set_size(
        width=0.4,
        layers=list(
            scale_y_continuous(trans=reverse_log_trans())
        )
    ),
    themes=upset_modify_themes(
        list('overall_sizes'=theme(axis.text.x=element_text(angle=90)))
    ),
    queries=list(upset_query(set='Drama', fill='blue'))
)</pre></body></html></div>
<p>[1] “Dropping empty groups: Short”</p>
<p>R[write to console]: Scale for ‘y’ is already present. Adding another scale for ‘y’, which will replace the existing scale.</p>
<p><img src="Examples_Python_files/Examples_Python_78_2.png"></p>
<p>We can also modify the labels to display the logged values:</p>
<div class="sourceCode" id="cb32"><html><body><pre class="r">%%R -w 500 -h 300

upset(
    movies, genres,
    min_size=10,
    width_ratio=0.2,
    set_sizes=upset_set_size(
        width=0.4,
        layers=list(
            scale_y_continuous(
                trans=reverse_log_trans(),
                labels=log10
            ),
            ylab('log10(set size)')
        )
    )
)</pre></body></html></div>
<p>[1] “Dropping empty groups: Short”</p>
<p>R[write to console]: Scale for ‘y’ is already present. Adding another scale for ‘y’, which will replace the existing scale.</p>
<p><img src="Examples_Python_files/Examples_Python_80_2.png"></p>
</div>
<div id="hide-the-set-sizes-altogether" class="section level3">
<h3 class="hasAnchor">
<a href="#hide-the-set-sizes-altogether" class="anchor"></a>4.4 Hide the set sizes altogether</h3>
<div class="sourceCode" id="cb33"><html><body><pre class="r">%%R -w 500 -h 300

upset(
    movies, genres,
    min_size=10,
    width_ratio=0.2,
    set_sizes=FALSE
)</pre></body></html></div>
<p>[1] “Dropping empty groups: Short”</p>
<p><img src="Examples_Python_files/Examples_Python_82_1.png"></p>
</div>
</div>
<div id="adjusting-other-aesthetics" class="section level2">
<h2 class="hasAnchor">
<a href="#adjusting-other-aesthetics" class="anchor"></a>5. Adjusting other aesthetics</h2>
<div id="stripes" class="section level3">
<h3 class="hasAnchor">
<a href="#stripes" class="anchor"></a>Stripes</h3>
<div class="sourceCode" id="cb34"><html><body><pre class="r">%%R -w 800 -h 400
upset(
    movies,
    genres,
    stripes=c('cornsilk1', 'deepskyblue1'),
    min_size=10
)</pre></body></html></div>
<p>[1] “Dropping empty groups: Short”</p>
<p><img src="Examples_Python_files/Examples_Python_85_1.png"></p>
<p>To effectively disable the stripes:</p>
<div class="sourceCode" id="cb35"><html><body><pre class="r">%%R -w 800 -h 400
upset(
    movies,
    genres,
    stripes=c('white', 'white'),
    min_size=10
)</pre></body></html></div>
<p>[1] “Dropping empty groups: Short”</p>
<p><img src="Examples_Python_files/Examples_Python_87_1.png"></p>
</div>
<div id="adding-title" class="section level3">
<h3 class="hasAnchor">
<a href="#adding-title" class="anchor"></a>Adding title</h3>
<p>Adding title with <code>ggtitle</code> with add it to the intesection matrix:</p>
<div class="sourceCode" id="cb36"><html><body><pre class="r">%%R -w 800 -h 400
upset(movies, genres, min_size=10) + ggtitle('Intersection matrix title')</pre></body></html></div>
<p>[1] “Dropping empty groups: Short”</p>
<p><img src="Examples_Python_files/Examples_Python_90_1.png"></p>
<p>In order to add a title for the entire plot, you need to wrap the plot:</p>
<div class="sourceCode" id="cb37"><html><body><pre class="r">%%R -w 800 -h 400
upset(movies, genres, min_size=10, wrap=TRUE) + ggtitle('The overlap between genres')</pre></body></html></div>
<p>[1] “Dropping empty groups: Short”</p>
<p><img src="Examples_Python_files/Examples_Python_92_1.png"></p>
</div>
</div>
<div id="themes" class="section level2">
<h2 class="hasAnchor">
<a href="#themes" class="anchor"></a>6. Themes</h2>
<p>The themes for specific components are defined in <code>upset_themes</code> list, which contains themes for:</p>
<div class="sourceCode" id="cb38"><html><body><pre class="r">%%R
names(upset_themes)</pre></body></html></div>
<p>[1] “intersections_matrix” “Intersection size” “overall_sizes”<br>
[4] “default”</p>
<p>You can substitute this list for your own using <code>themes</code> argument. While you can specify a theme for every component, if you omit one or more components those will be taken from the element named <code>default</code>.</p>
<div id="substituting-themes" class="section level3">
<h3 class="hasAnchor">
<a href="#substituting-themes" class="anchor"></a>6.1 Substituting themes</h3>
<div class="sourceCode" id="cb39"><html><body><pre class="r">%%R -w 800 -h 400
upset(movies, genres, min_size=10, themes=list(default=theme()))</pre></body></html></div>
<p>[1] “Dropping empty groups: Short”</p>
<p><img src="Examples_Python_files/Examples_Python_98_1.png"></p>
<p>You can also add themes for your custom panels/annotations:</p>
<div class="sourceCode" id="cb40"><html><body><pre class="r">%%R -w 800 -h 800

upset(
    movies,
    genres,
    annotations = list(
        'Length'=list(
            aes=aes(x=intersection, y=length),
            geom=geom_boxplot()
        ),
        'Rating'=list(
            aes=aes(x=intersection, y=rating),
            geom=list(
                geom_jitter(aes(color=log10(votes))),
                geom_violin(width=1.1, alpha=0.5)
            )
        )
    ),
    min_size=10,
    width_ratio=0.1,
    themes=modifyList(
        upset_themes,
        list(Rating=theme_void(), Length=theme())
    )
)</pre></body></html></div>
<p>[1] “Dropping empty groups: Short”</p>
<p><img src="Examples_Python_files/Examples_Python_100_1.png"></p>
</div>
<div id="adjusting-the-default-themes" class="section level3">
<h3 class="hasAnchor">
<a href="#adjusting-the-default-themes" class="anchor"></a>6.2 Adjusting the default themes</h3>
<p>Modify all the default themes as once with <code><a href="../reference/upset_default_themes.html">upset_default_themes()</a></code>:</p>
<div class="sourceCode" id="cb41"><html><body><pre class="r">%%R -w 800 -h 400

upset(
    movies, genres, min_size=10, width_ratio=0.1,
    themes=upset_default_themes(text=element_text(color='red'))
)</pre></body></html></div>
<p>[1] “Dropping empty groups: Short”</p>
<p><img src="Examples_Python_files/Examples_Python_103_1.png"></p>
<p>To modify only a subset of default themes use <code><a href="../reference/upset_modify_themes.html">upset_modify_themes()</a></code>:</p>
<div class="sourceCode" id="cb42"><html><body><pre class="r">%%R -w 800 -h 400

upset(
    movies, genres,
    base_annotations=list('Intersection size'=intersection_size(counts=FALSE)),
    min_size=100,
    width_ratio=0.1,
    themes=upset_modify_themes(
        list(
            'intersections_matrix'=theme(text=element_text(size=20)),
            'overall_sizes'=theme(axis.text.x=element_text(angle=90))
        )
    )
)</pre></body></html></div>
<p>[1] “Dropping empty groups: Animation, Documentary, Short”</p>
<p><img src="Examples_Python_files/Examples_Python_105_1.png"></p>
</div>
</div>
<div id="highlighting-queries" class="section level2">
<h2 class="hasAnchor">
<a href="#highlighting-queries" class="anchor"></a>7. Highlighting (queries)</h2>
<p>Pass a list of lists generated with <code><a href="../reference/upset_query.html">upset_query()</a></code> utility to the optional <code>queries</code> argument to selectively modify aesthetics of specific intersections or sets.</p>
<p>Use one of the arguments: <code>set</code> or <code>intersection</code> (not both) to specify what to highlight: - <code>set</code> will highlight the bar of the set size, - <code>intersection</code> will highlight an intersection on all components (by default), or on components chosen with <code>only_components</code> - all other parameters will be used to modify the geoms</p>
<div class="sourceCode" id="cb43"><html><body><pre class="r">%%R -w 800 -h 600

upset(
    movies, genres, name='genre', width_ratio=0.1, min_size=10,
    annotations = list(
        'Length'=list(
            aes=aes(x=intersection, y=length),
            geom=geom_boxplot()
        )
    ),
    queries=list(
        upset_query(
            intersect=c('Drama', 'Comedy'),
            color='red',
            fill='red',
            only_components=c('intersections_matrix', 'Intersection size')
        ),
        upset_query(
            set='Drama',
            fill='blue'
        ),
        upset_query(
            intersect=c('Romance', 'Comedy'),
            fill='yellow',
            only_components=c('Length')
        )
    )
)</pre></body></html></div>
<p>[1] “Dropping empty groups: Short”</p>
<p><img src="Examples_Python_files/Examples_Python_108_1.png"></p>
</div>
<div id="sorting" class="section level2">
<h2 class="hasAnchor">
<a href="#sorting" class="anchor"></a>8. Sorting</h2>
<div id="sorting-intersections" class="section level3">
<h3 class="hasAnchor">
<a href="#sorting-intersections" class="anchor"></a>8.1 Sorting intersections</h3>
<p>By degree:</p>
<div class="sourceCode" id="cb44"><html><body><pre class="r">%%R -w 800 -h 300
upset(movies, genres, width_ratio=0.1, sort_intersections_by='degree')</pre></body></html></div>
<p><img src="Examples_Python_files/Examples_Python_112_0.png"></p>
<p>By ratio:</p>
<div class="sourceCode" id="cb45"><html><body><pre class="r">%%R -w 800 -h 400
upset(
    movies, genres, name='genre', width_ratio=0.1, min_size=10,
    sort_intersections_by='ratio',
    base_annotations=list(
        'Intersection size'=intersection_size(text_aes=aes_(label=upset_text_percentage())),
        'Intersection ratio'=intersection_ratio(text_aes=aes_(label=upset_text_percentage()))
    )
)</pre></body></html></div>
<p>[1] “Dropping empty groups: Short”</p>
<p><img src="Examples_Python_files/Examples_Python_114_1.png"></p>
<p>The other way around:</p>
<div class="sourceCode" id="cb46"><html><body><pre class="r">%%R -w 800 -h 300
upset(movies, genres, width_ratio=0.1, sort_intersections='ascending')</pre></body></html></div>
<p><img src="Examples_Python_files/Examples_Python_116_0.png"></p>
<p>Without any sorting:</p>
<div class="sourceCode" id="cb47"><html><body><pre class="r">%%R -w 800 -h 300
upset(movies, genres, width_ratio=0.1, sort_intersections=FALSE)</pre></body></html></div>
<p><img src="Examples_Python_files/Examples_Python_118_0.png"></p>
</div>
<div id="sorting-sets" class="section level3">
<h3 class="hasAnchor">
<a href="#sorting-sets" class="anchor"></a>8.2 Sorting sets</h3>
<p>Ascending:</p>
<div class="sourceCode" id="cb48"><html><body><pre class="r">%%R -w 800 -h 300
upset(movies, genres, width_ratio=0.1, sort_sets='ascending')</pre></body></html></div>
<p><img src="Examples_Python_files/Examples_Python_121_0.png"></p>
<p>Without sorting - preserving the order as in genres:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb49-1" title="1">genres</a></code></pre></div>
<p>[‘Action’, ‘Animation’, ‘Comedy’, ‘Drama’, ‘Documentary’, ‘Romance’, ‘Short’]</p>
<div class="sourceCode" id="cb50"><html><body><pre class="r">%%R -w 800 -h 300
upset(movies, genres, width_ratio=0.1, sort_sets=FALSE)</pre></body></html></div>
<p><img src="Examples_Python_files/Examples_Python_124_0.png"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Michał Krassowski.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.0.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
